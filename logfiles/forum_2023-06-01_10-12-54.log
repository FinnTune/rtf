2023/06/01 10:03:46 main.go:127: Main begun. Log file checked, opened, and set.
2023/06/01 10:03:46 main.go:128: New Forum Begun
2023/06/01 10:03:46 sqlFuncs.go:18: Database opened successfully.
2023/06/01 10:03:46 main.go:57: File Servers Started.
2023/06/01 10:03:46 main.go:68: Handlers Started.
2023/06/01 10:03:46 main.go:104: Server Started and listening on port :443.
2023/06/01 10:04:14 server.go:3217: http: TLS handshake error from 127.0.0.1:53170: remote error: tls: bad certificate
2023/06/01 10:04:17 main.go:73: Handling request "/" and serving index.html
2023/06/01 10:04:17 main.go:79: Cookie does not exist. Creating cookie.
2023/06/01 10:04:17 handlers.go:41: Checking login status.
2023/06/01 10:04:17 handlers.go:56: Manager's clients:  map[]
2023/06/01 10:04:17 handlers.go:94: No client found with matching session ID. User not logged in.
2023/06/01 10:04:24 handlers.go:41: Checking login status.
2023/06/01 10:04:24 handlers.go:56: Manager's clients:  map[]
2023/06/01 10:04:24 handlers.go:94: No client found with matching session ID. User not logged in.
2023/06/01 10:04:24 handlers.go:108: Login handler reached.
2023/06/01 10:04:24 handlers.go:124: Login POST request received.
2023/06/01 10:04:25 utility.go:29: Password and hash match.
2023/06/01 10:04:25 handlers.go:143: User found: {ID:1 Username:admin Email:admin@example.com Joined:2023-05-17 15:29:59 Password:$2a$12$nOhLtBhYC0.XOm3IQ37wy.H8Mk8u52Grek4d1UGA0sNbQr4D/ik32 Session: NumberComments:0 NumberPosts:0}
2023/06/01 10:04:25 handlers.go:144: Authentication condition reached.
2023/06/01 10:04:25 handlers.go:145: User Login list:  map[]
2023/06/01 10:04:25 handlers.go:377: AllPostsHandler reached.
2023/06/01 10:04:25 handlers.go:270: Serving websocket.
2023/06/01 10:04:25 handlers.go:30: Checking origin: https://localhost
2023/06/01 10:04:25 handlers.go:278: Decoding request body.
2023/06/01 10:04:25 handlers.go:279: ServeWS request body:  {}
2023/06/01 10:04:25 handlers.go:291: Session Id in ServeWS:  e340949e-1bc5-45b8-92a6-075620520c71
2023/06/01 10:04:25 handlers.go:308: Client does not exist.
2023/06/01 10:04:25 ws-client.go:44: New client connected.
2023/06/01 10:04:25 ws-manager.go:164: Client: 127.0.0.1:58280 added to manager.
2023/06/01 10:04:25 ws-client.go:65: Client IP and client port num.:  127.0.0.1:58280
2023/06/01 10:04:25 handlers.go:377: AllPostsHandler reached.
2023/06/01 10:04:25 ws-client.go:89: Client read message from:  127.0.0.1:58280
2023/06/01 10:04:25 ws-manager.go:64: Adding user info: {user-connect {"otp":"ff681069-32c6-4daf-82bf-abff3dc94b91","id":1,"username":"admin","email":"admin@example.com","joined":"2023-05-17 15:29:59","loggedIn":false}}
2023/06/01 10:04:25 ws-manager.go:77: Adding user to LoggedInList:  admin
2023/06/01 10:04:25 ws-manager.go:81: User: admin added to LoggedInList:  map[admin:true]
2023/06/01 10:04:25 ws-client.go:173: Message sent to client: 127.0.0.1:58280 Message: {"type":"users-online","payload":{"admin":true}}
2023/06/01 10:04:34 ws-client.go:181: Ping sent to client: 127.0.0.1:58280
2023/06/01 10:04:34 ws-client.go:60: Pong received, handler called, timer reset.
2023/06/01 10:04:37 handlers.go:41: Checking login status.
2023/06/01 10:04:37 handlers.go:56: Manager's clients:  map[0xc0000e0a10:true]
2023/06/01 10:04:37 handlers.go:67: Session cookie found. User logged in
2023/06/01 10:04:37 ws-client.go:89: Client read message from:  127.0.0.1:58280
2023/06/01 10:04:37 ws-client.go:91: Client Made an Error:  read tcp 127.0.0.1:443->127.0.0.1:58280: use of closed network connection
2023/06/01 10:04:37 handlers.go:87: OTP:  9231c9f8-adb5-4079-8d30-e7c8b1b13a97
2023/06/01 10:04:37 handlers.go:377: AllPostsHandler reached.
2023/06/01 10:04:37 handlers.go:270: Serving websocket.
2023/06/01 10:04:37 handlers.go:30: Checking origin: https://localhost
2023/06/01 10:04:37 handlers.go:278: Decoding request body.
2023/06/01 10:04:37 handlers.go:279: ServeWS request body:  {}
2023/06/01 10:04:37 handlers.go:291: Session Id in ServeWS:  e340949e-1bc5-45b8-92a6-075620520c71
2023/06/01 10:04:37 handlers.go:294: Client already exists.
2023/06/01 10:04:37 handlers.go:295: ClientUName Debug:  admin
2023/06/01 10:04:37 ws-client.go:65: Client IP and client port num.:  127.0.0.1:36004
2023/06/01 10:04:37 ws-client.go:89: Client read message from:  127.0.0.1:36004
2023/06/01 10:04:37 ws-manager.go:64: Adding user info: {user-connect {"otp":"9231c9f8-adb5-4079-8d30-e7c8b1b13a97","id":0,"username":"admin","email":"admin@example.com","joined":"2023-05-17 15:29:59","loggedIn":true}}
2023/06/01 10:04:37 ws-manager.go:75: User in LoggedInList:  map[admin:true]
2023/06/01 10:04:37 ws-manager.go:81: User: admin added to LoggedInList:  map[admin:true]
2023/06/01 10:04:37 ws-client.go:173: Message sent to client: 127.0.0.1:36004 Message: {"type":"users-online","payload":{"admin":true}}
2023/06/01 10:04:43 ws-client.go:181: Ping sent to client: 127.0.0.1:36004
2023/06/01 10:04:43 ws-client.go:60: Pong received, handler called, timer reset.
2023/06/01 10:04:46 ws-client.go:181: Ping sent to client: 127.0.0.1:36004
2023/06/01 10:04:46 ws-client.go:60: Pong received, handler called, timer reset.
2023/06/01 10:04:49 main.go:73: Handling request "/" and serving index.html
2023/06/01 10:04:49 main.go:79: Cookie does not exist. Creating cookie.
2023/06/01 10:04:49 handlers.go:41: Checking login status.
2023/06/01 10:04:49 handlers.go:56: Manager's clients:  map[0xc0000e0a10:true]
2023/06/01 10:04:49 handlers.go:94: No client found with matching session ID. User not logged in.
2023/06/01 10:04:52 ws-client.go:181: Ping sent to client: 127.0.0.1:36004
2023/06/01 10:04:52 ws-client.go:60: Pong received, handler called, timer reset.
2023/06/01 10:04:55 ws-client.go:181: Ping sent to client: 127.0.0.1:36004
2023/06/01 10:04:55 ws-client.go:60: Pong received, handler called, timer reset.
2023/06/01 10:04:59 handlers.go:41: Checking login status.
2023/06/01 10:04:59 handlers.go:56: Manager's clients:  map[0xc0000e0a10:true]
2023/06/01 10:04:59 handlers.go:94: No client found with matching session ID. User not logged in.
2023/06/01 10:04:59 handlers.go:108: Login handler reached.
2023/06/01 10:04:59 handlers.go:124: Login POST request received.
2023/06/01 10:04:59 utility.go:29: Password and hash match.
2023/06/01 10:04:59 handlers.go:143: User found: {ID:2 Username:usr1 Email:usr1@example.com Joined:2023-05-20 12:10:04 Password:$2a$12$SancqnbK.EjBxHY8VwtBte/kDsqrvSGSz3idKw0rqhif5pvQ5vI8i Session: NumberComments:0 NumberPosts:0}
2023/06/01 10:04:59 handlers.go:144: Authentication condition reached.
2023/06/01 10:04:59 handlers.go:145: User Login list:  map[admin:true]
2023/06/01 10:04:59 handlers.go:377: AllPostsHandler reached.
2023/06/01 10:04:59 handlers.go:377: AllPostsHandler reached.
2023/06/01 10:04:59 handlers.go:270: Serving websocket.
2023/06/01 10:04:59 handlers.go:30: Checking origin: https://localhost
2023/06/01 10:04:59 handlers.go:278: Decoding request body.
2023/06/01 10:04:59 handlers.go:279: ServeWS request body:  {}
2023/06/01 10:04:59 handlers.go:291: Session Id in ServeWS:  3962a389-9da4-430e-acd4-f6388da1e983
2023/06/01 10:04:59 handlers.go:308: Client does not exist.
2023/06/01 10:04:59 ws-client.go:44: New client connected.
2023/06/01 10:04:59 ws-manager.go:164: Client: 127.0.0.1:51690 added to manager.
2023/06/01 10:04:59 ws-client.go:65: Client IP and client port num.:  127.0.0.1:51690
2023/06/01 10:04:59 ws-client.go:89: Client read message from:  127.0.0.1:51690
2023/06/01 10:04:59 ws-manager.go:64: Adding user info: {user-connect {"otp":"be44555a-0eb8-41e7-a70c-33f2c00e882f","id":2,"username":"usr1","email":"usr1@example.com","joined":"2023-05-20 12:10:04","loggedIn":false}}
2023/06/01 10:04:59 ws-manager.go:77: Adding user to LoggedInList:  usr1
2023/06/01 10:04:59 ws-manager.go:81: User: usr1 added to LoggedInList:  map[admin:true usr1:true]
2023/06/01 10:04:59 ws-client.go:173: Message sent to client: 127.0.0.1:51690 Message: {"type":"users-online","payload":{"admin":true,"usr1":true}}
2023/06/01 10:04:59 ws-client.go:173: Message sent to client: 127.0.0.1:36004 Message: {"type":"users-online","payload":{"admin":true,"usr1":true}}
2023/06/01 10:05:01 ws-client.go:181: Ping sent to client: 127.0.0.1:36004
2023/06/01 10:05:01 ws-client.go:60: Pong received, handler called, timer reset.
2023/06/01 10:05:04 ws-client.go:181: Ping sent to client: 127.0.0.1:36004
2023/06/01 10:05:04 ws-client.go:60: Pong received, handler called, timer reset.
2023/06/01 10:05:08 ws-client.go:181: Ping sent to client: 127.0.0.1:51690
2023/06/01 10:05:08 ws-client.go:60: Pong received, handler called, timer reset.
2023/06/01 10:05:10 ws-client.go:181: Ping sent to client: 127.0.0.1:36004
2023/06/01 10:05:10 ws-client.go:60: Pong received, handler called, timer reset.
2023/06/01 10:05:13 ws-client.go:181: Ping sent to client: 127.0.0.1:36004
2023/06/01 10:05:13 ws-client.go:60: Pong received, handler called, timer reset.
2023/06/01 10:05:17 ws-client.go:89: Client read message from:  127.0.0.1:36004
2023/06/01 10:05:17 ws-manager.go:37: Event/message sent: {new-message {"message":"dfkjsg","from":"admin","to":"usr1","sent":1685603117203}}
2023/06/01 10:05:17 ws-client.go:173: Message sent to client: 127.0.0.1:51690 Message: {"type":"sent-message","payload":{"message":"dfkjsg","from":"admin","to":"","sent":"2023-06-01T10:05:17.230486548+03:00"}}
2023/06/01 10:05:17 ws-client.go:173: Message sent to client: 127.0.0.1:36004 Message: {"type":"sent-message","payload":{"message":"dfkjsg","from":"admin","to":"","sent":"2023-06-01T10:05:17.230486548+03:00"}}
2023/06/01 10:05:17 ws-client.go:181: Ping sent to client: 127.0.0.1:51690
2023/06/01 10:05:17 ws-client.go:60: Pong received, handler called, timer reset.
2023/06/01 10:05:19 ws-client.go:181: Ping sent to client: 127.0.0.1:36004
2023/06/01 10:05:19 ws-client.go:60: Pong received, handler called, timer reset.
2023/06/01 10:05:22 ws-client.go:181: Ping sent to client: 127.0.0.1:36004
2023/06/01 10:05:22 ws-client.go:60: Pong received, handler called, timer reset.
2023/06/01 10:05:26 ws-client.go:181: Ping sent to client: 127.0.0.1:51690
2023/06/01 10:05:26 ws-client.go:60: Pong received, handler called, timer reset.
2023/06/01 10:05:28 ws-client.go:181: Ping sent to client: 127.0.0.1:36004
2023/06/01 10:05:28 ws-client.go:60: Pong received, handler called, timer reset.
2023/06/01 10:05:28 handlers.go:199: Logout POST request received.
2023/06/01 10:05:28 handlers.go:212: Manager's clients:  map[0xc0000e0a10:true 0xc000140930:true]
2023/06/01 10:05:28 handlers.go:215: Client found.
2023/06/01 10:05:28 ws-client.go:89: Client read message from:  127.0.0.1:36004
2023/06/01 10:05:28 ws-client.go:91: Client Made an Error:  read tcp 127.0.0.1:443->127.0.0.1:36004: use of closed network connection
2023/06/01 10:05:28 h2_bundle.go:4452: http2: panic serving 127.0.0.1:53172: runtime error: invalid memory address or nil pointer dereference
goroutine 270 [running]:
net/http.(*http2serverConn).runHandler.func1()
	/usr/local/go/src/net/http/h2_bundle.go:6042 +0x145
panic({0x83bb80, 0xb2a020})
	/usr/local/go/src/runtime/panic.go:884 +0x213
github.com/gorilla/websocket.(*Conn).RemoteAddr(...)
	/root/go/pkg/mod/github.com/gorilla/websocket@v1.5.0/conn.go:355
rtForum/websocket.(*Manager).removeClient(0xc00007ebd0, 0xc0000e0a10)
	/home/zdrastvyetyeh/.g6057/javascript-grit/Javascript-Grit-Projects/rtf/websocket/ws-manager.go:174 +0xf0
rtForum/websocket.(*Manager).serveLogout(0xc00007ebd0, {0x91e660, 0xc0000140e0}, 0xc0001b7200)
	/home/zdrastvyetyeh/.g6057/javascript-grit/Javascript-Grit-Projects/rtf/websocket/handlers.go:220 +0x425
rtForum/websocket.LogoutHandler({0x91e660?, 0xc0000140e0?}, 0x0?)
	/home/zdrastvyetyeh/.g6057/javascript-grit/Javascript-Grit-Projects/rtf/websocket/handlers.go:249 +0x36
net/http.HandlerFunc.ServeHTTP(0xb6ee00?, {0x91e660?, 0xc0000140e0?}, 0xc0001a59f8?)
	/usr/local/go/src/net/http/server.go:2122 +0x2f
net/http.(*ServeMux).ServeHTTP(0x0?, {0x91e660, 0xc0000140e0}, 0xc0001b7200)
	/usr/local/go/src/net/http/server.go:2500 +0x149
net/http.serverHandler.ServeHTTP({0xc000396588?}, {0x91e660, 0xc0000140e0}, 0xc0001b7200)
	/usr/local/go/src/net/http/server.go:2936 +0x316
net/http.initALPNRequest.ServeHTTP({{0x91e918?, 0xc0001923f0?}, 0xc00019a380?, {0xc00014c000?}}, {0x91e660, 0xc0000140e0}, 0xc0001b7200)
	/usr/local/go/src/net/http/server.go:3545 +0x245
net/http.(*http2serverConn).runHandler(0xc0003966e0?, 0xc0003967d0?, 0x71c5c6?, 0xc000140930?)
	/usr/local/go/src/net/http/h2_bundle.go:6049 +0x83
created by net/http.(*http2serverConn).processHeaders
	/usr/local/go/src/net/http/h2_bundle.go:5762 +0x68a
2023/06/01 10:05:31 ws-client.go:178: Client connection is nil.
2023/06/01 10:05:35 ws-client.go:181: Ping sent to client: 127.0.0.1:51690
2023/06/01 10:05:35 ws-client.go:60: Pong received, handler called, timer reset.
2023/06/01 10:05:37 ws-client.go:178: Client connection is nil.
2023/06/01 10:05:44 ws-client.go:181: Ping sent to client: 127.0.0.1:51690
2023/06/01 10:05:44 ws-client.go:60: Pong received, handler called, timer reset.
2023/06/01 10:05:53 ws-client.go:181: Ping sent to client: 127.0.0.1:51690
2023/06/01 10:05:53 ws-client.go:60: Pong received, handler called, timer reset.
2023/06/01 10:05:54 ws-client.go:89: Client read message from:  127.0.0.1:51690
2023/06/01 10:05:54 ws-client.go:91: Client Made an Error:  websocket: close 1001 (going away)
2023/06/01 10:05:54 main.go:73: Handling request "/" and serving index.html
2023/06/01 10:05:54 main.go:77: Cookie exists.
2023/06/01 10:05:55 handlers.go:41: Checking login status.
2023/06/01 10:05:55 handlers.go:56: Manager's clients:  map[0xc000140930:true]
2023/06/01 10:05:55 handlers.go:67: Session cookie found. User logged in
2023/06/01 10:05:55 handlers.go:87: OTP:  01dc6e36-7cf5-4a7c-b56a-74ec2be35f98
2023/06/01 10:05:55 handlers.go:377: AllPostsHandler reached.
2023/06/01 10:05:55 handlers.go:270: Serving websocket.
2023/06/01 10:05:55 handlers.go:30: Checking origin: https://localhost
2023/06/01 10:05:55 handlers.go:278: Decoding request body.
2023/06/01 10:05:55 handlers.go:279: ServeWS request body:  {}
2023/06/01 10:05:55 handlers.go:291: Session Id in ServeWS:  3962a389-9da4-430e-acd4-f6388da1e983
2023/06/01 10:05:55 handlers.go:294: Client already exists.
2023/06/01 10:05:55 handlers.go:295: ClientUName Debug:  usr1
2023/06/01 10:05:55 ws-client.go:65: Client IP and client port num.:  127.0.0.1:46314
2023/06/01 10:05:55 ws-client.go:89: Client read message from:  127.0.0.1:46314
2023/06/01 10:05:55 ws-manager.go:64: Adding user info: {user-connect {"otp":"01dc6e36-7cf5-4a7c-b56a-74ec2be35f98","id":0,"username":"usr1","email":"usr1@example.com","joined":"2023-05-20 12:10:04","loggedIn":true}}
2023/06/01 10:05:55 ws-manager.go:75: User in LoggedInList:  map[usr1:true]
2023/06/01 10:05:55 ws-manager.go:81: User: usr1 added to LoggedInList:  map[usr1:true]
2023/06/01 10:05:55 ws-client.go:173: Message sent to client: 127.0.0.1:46314 Message: {"type":"users-online","payload":{"usr1":true}}
2023/06/01 10:06:02 ws-client.go:181: Ping sent to client: 127.0.0.1:46314
2023/06/01 10:06:02 ws-client.go:60: Pong received, handler called, timer reset.
2023/06/01 10:06:04 ws-client.go:181: Ping sent to client: 127.0.0.1:46314
2023/06/01 10:06:04 ws-client.go:60: Pong received, handler called, timer reset.
2023/06/01 10:06:11 ws-client.go:181: Ping sent to client: 127.0.0.1:46314
2023/06/01 10:06:11 ws-client.go:60: Pong received, handler called, timer reset.
2023/06/01 10:06:13 ws-client.go:181: Ping sent to client: 127.0.0.1:46314
2023/06/01 10:06:13 ws-client.go:60: Pong received, handler called, timer reset.
2023/06/01 10:06:20 ws-client.go:181: Ping sent to client: 127.0.0.1:46314
2023/06/01 10:06:20 ws-client.go:60: Pong received, handler called, timer reset.
2023/06/01 10:06:22 ws-client.go:181: Ping sent to client: 127.0.0.1:46314
2023/06/01 10:06:22 ws-client.go:60: Pong received, handler called, timer reset.
2023/06/01 10:06:29 ws-client.go:181: Ping sent to client: 127.0.0.1:46314
2023/06/01 10:06:29 ws-client.go:60: Pong received, handler called, timer reset.
2023/06/01 10:06:31 ws-client.go:181: Ping sent to client: 127.0.0.1:46314
2023/06/01 10:06:31 ws-client.go:60: Pong received, handler called, timer reset.
2023/06/01 10:06:38 ws-client.go:181: Ping sent to client: 127.0.0.1:46314
2023/06/01 10:06:38 ws-client.go:60: Pong received, handler called, timer reset.
2023/06/01 10:06:40 ws-client.go:181: Ping sent to client: 127.0.0.1:46314
2023/06/01 10:06:40 ws-client.go:60: Pong received, handler called, timer reset.
2023/06/01 10:06:47 ws-client.go:181: Ping sent to client: 127.0.0.1:46314
2023/06/01 10:06:47 ws-client.go:60: Pong received, handler called, timer reset.
2023/06/01 10:06:49 ws-client.go:181: Ping sent to client: 127.0.0.1:46314
2023/06/01 10:06:49 ws-client.go:60: Pong received, handler called, timer reset.
2023/06/01 10:06:56 ws-client.go:181: Ping sent to client: 127.0.0.1:46314
2023/06/01 10:06:56 ws-client.go:60: Pong received, handler called, timer reset.
2023/06/01 10:06:58 ws-client.go:181: Ping sent to client: 127.0.0.1:46314
2023/06/01 10:06:58 ws-client.go:60: Pong received, handler called, timer reset.
2023/06/01 10:07:05 ws-client.go:181: Ping sent to client: 127.0.0.1:46314
2023/06/01 10:07:05 ws-client.go:60: Pong received, handler called, timer reset.
2023/06/01 10:07:07 ws-client.go:181: Ping sent to client: 127.0.0.1:46314
2023/06/01 10:07:07 ws-client.go:60: Pong received, handler called, timer reset.
2023/06/01 10:07:14 ws-client.go:181: Ping sent to client: 127.0.0.1:46314
2023/06/01 10:07:14 ws-client.go:60: Pong received, handler called, timer reset.
2023/06/01 10:07:16 ws-client.go:181: Ping sent to client: 127.0.0.1:46314
2023/06/01 10:07:16 ws-client.go:60: Pong received, handler called, timer reset.
2023/06/01 10:07:22 handlers.go:41: Checking login status.
2023/06/01 10:07:22 handlers.go:56: Manager's clients:  map[0xc000140930:true]
2023/06/01 10:07:22 handlers.go:94: No client found with matching session ID. User not logged in.
2023/06/01 10:07:22 handlers.go:108: Login handler reached.
2023/06/01 10:07:22 handlers.go:124: Login POST request received.
2023/06/01 10:07:22 utility.go:29: Password and hash match.
2023/06/01 10:07:22 handlers.go:143: User found: {ID:1 Username:admin Email:admin@example.com Joined:2023-05-17 15:29:59 Password:$2a$12$nOhLtBhYC0.XOm3IQ37wy.H8Mk8u52Grek4d1UGA0sNbQr4D/ik32 Session: NumberComments:0 NumberPosts:0}
2023/06/01 10:07:22 handlers.go:144: Authentication condition reached.
2023/06/01 10:07:22 handlers.go:145: User Login list:  map[usr1:true]
2023/06/01 10:07:22 handlers.go:377: AllPostsHandler reached.
2023/06/01 10:07:22 handlers.go:377: AllPostsHandler reached.
2023/06/01 10:07:22 handlers.go:270: Serving websocket.
2023/06/01 10:07:22 handlers.go:30: Checking origin: https://localhost
2023/06/01 10:07:22 handlers.go:278: Decoding request body.
2023/06/01 10:07:22 handlers.go:279: ServeWS request body:  {}
2023/06/01 10:07:22 handlers.go:291: Session Id in ServeWS:  e340949e-1bc5-45b8-92a6-075620520c71
2023/06/01 10:07:22 handlers.go:308: Client does not exist.
2023/06/01 10:07:22 ws-client.go:44: New client connected.
2023/06/01 10:07:22 ws-manager.go:164: Client: 127.0.0.1:50056 added to manager.
2023/06/01 10:07:22 ws-client.go:65: Client IP and client port num.:  127.0.0.1:50056
2023/06/01 10:07:22 ws-client.go:89: Client read message from:  127.0.0.1:50056
2023/06/01 10:07:22 ws-manager.go:64: Adding user info: {user-connect {"otp":"e7434ab3-564a-4712-9c15-4ceef154a73a","id":1,"username":"admin","email":"admin@example.com","joined":"2023-05-17 15:29:59","loggedIn":false}}
2023/06/01 10:07:22 ws-manager.go:77: Adding user to LoggedInList:  admin
2023/06/01 10:07:22 ws-manager.go:81: User: admin added to LoggedInList:  map[admin:true usr1:true]
2023/06/01 10:07:22 ws-client.go:173: Message sent to client: 127.0.0.1:46314 Message: {"type":"users-online","payload":{"admin":true,"usr1":true}}
2023/06/01 10:07:22 ws-client.go:173: Message sent to client: 127.0.0.1:50056 Message: {"type":"users-online","payload":{"admin":true,"usr1":true}}
2023/06/01 10:07:23 ws-client.go:181: Ping sent to client: 127.0.0.1:46314
2023/06/01 10:07:23 ws-client.go:60: Pong received, handler called, timer reset.
2023/06/01 10:07:25 ws-client.go:181: Ping sent to client: 127.0.0.1:46314
2023/06/01 10:07:25 ws-client.go:60: Pong received, handler called, timer reset.
2023/06/01 10:07:28 handlers.go:199: Logout POST request received.
2023/06/01 10:07:28 handlers.go:212: Manager's clients:  map[0xc000140930:true 0xc000240af0:true]
2023/06/01 10:07:28 handlers.go:215: Client found.
2023/06/01 10:07:28 ws-client.go:89: Client read message from:  127.0.0.1:50056
2023/06/01 10:07:28 ws-client.go:91: Client Made an Error:  read tcp 127.0.0.1:443->127.0.0.1:50056: use of closed network connection
2023/06/01 10:07:28 h2_bundle.go:4452: http2: panic serving 127.0.0.1:53172: runtime error: invalid memory address or nil pointer dereference
goroutine 307 [running]:
net/http.(*http2serverConn).runHandler.func1()
	/usr/local/go/src/net/http/h2_bundle.go:6042 +0x145
panic({0x83bb80, 0xb2a020})
	/usr/local/go/src/runtime/panic.go:884 +0x213
github.com/gorilla/websocket.(*Conn).RemoteAddr(...)
	/root/go/pkg/mod/github.com/gorilla/websocket@v1.5.0/conn.go:355
rtForum/websocket.(*Manager).removeClient(0xc00007ebd0, 0xc000240af0)
	/home/zdrastvyetyeh/.g6057/javascript-grit/Javascript-Grit-Projects/rtf/websocket/ws-manager.go:174 +0xf0
rtForum/websocket.(*Manager).serveLogout(0xc00007ebd0, {0x91e660, 0xc0003ba020}, 0xc0000be500)
	/home/zdrastvyetyeh/.g6057/javascript-grit/Javascript-Grit-Projects/rtf/websocket/handlers.go:220 +0x425
rtForum/websocket.LogoutHandler({0x91e660?, 0xc0003ba020?}, 0xc0001a01a0?)
	/home/zdrastvyetyeh/.g6057/javascript-grit/Javascript-Grit-Projects/rtf/websocket/handlers.go:249 +0x36
net/http.HandlerFunc.ServeHTTP(0xb6ee00?, {0x91e660?, 0xc0003ba020?}, 0xc0000474a0?)
	/usr/local/go/src/net/http/server.go:2122 +0x2f
net/http.(*ServeMux).ServeHTTP(0x0?, {0x91e660, 0xc0003ba020}, 0xc0000be500)
	/usr/local/go/src/net/http/server.go:2500 +0x149
net/http.serverHandler.ServeHTTP({0x4ec493?}, {0x91e660, 0xc0003ba020}, 0xc0000be500)
	/usr/local/go/src/net/http/server.go:2936 +0x316
net/http.initALPNRequest.ServeHTTP({{0x91e918?, 0xc0001923f0?}, 0xc00019a380?, {0xc00014c000?}}, {0x91e660, 0xc0003ba020}, 0xc0000be500)
	/usr/local/go/src/net/http/server.go:3545 +0x245
net/http.(*http2serverConn).runHandler(0x0?, 0xc0000477d0?, 0x71c626?, 0xc000240af0?)
	/usr/local/go/src/net/http/h2_bundle.go:6049 +0x83
created by net/http.(*http2serverConn).processHeaders
	/usr/local/go/src/net/http/h2_bundle.go:5762 +0x68a
2023/06/01 10:07:31 ws-client.go:178: Client connection is nil.
2023/06/01 10:07:32 ws-client.go:89: Client read message from:  127.0.0.1:46314
2023/06/01 10:07:32 ws-client.go:91: Client Made an Error:  websocket: close 1001 (going away)
2023/06/01 10:07:32 main.go:73: Handling request "/" and serving index.html
2023/06/01 10:07:32 main.go:77: Cookie exists.
2023/06/01 10:07:32 handlers.go:41: Checking login status.
2023/06/01 10:07:32 handlers.go:56: Manager's clients:  map[0xc000140930:true]
2023/06/01 10:07:32 handlers.go:67: Session cookie found. User logged in
2023/06/01 10:07:32 handlers.go:87: OTP:  82777255-ba4b-47cb-9296-69758bb742aa
2023/06/01 10:07:32 handlers.go:377: AllPostsHandler reached.
2023/06/01 10:07:32 handlers.go:270: Serving websocket.
2023/06/01 10:07:32 handlers.go:30: Checking origin: https://localhost
2023/06/01 10:07:32 handlers.go:278: Decoding request body.
2023/06/01 10:07:32 handlers.go:279: ServeWS request body:  {}
2023/06/01 10:07:32 handlers.go:291: Session Id in ServeWS:  3962a389-9da4-430e-acd4-f6388da1e983
2023/06/01 10:07:32 handlers.go:294: Client already exists.
2023/06/01 10:07:32 handlers.go:295: ClientUName Debug:  usr1
2023/06/01 10:07:32 ws-client.go:65: Client IP and client port num.:  127.0.0.1:41200
2023/06/01 10:07:32 ws-client.go:89: Client read message from:  127.0.0.1:41200
2023/06/01 10:07:32 ws-manager.go:64: Adding user info: {user-connect {"otp":"82777255-ba4b-47cb-9296-69758bb742aa","id":0,"username":"usr1","email":"usr1@example.com","joined":"2023-05-20 12:10:04","loggedIn":true}}
2023/06/01 10:07:32 ws-manager.go:75: User in LoggedInList:  map[usr1:true]
2023/06/01 10:07:32 ws-manager.go:81: User: usr1 added to LoggedInList:  map[usr1:true]
2023/06/01 10:07:32 ws-client.go:173: Message sent to client: 127.0.0.1:41200 Message: {"type":"users-online","payload":{"usr1":true}}
2023/06/01 10:07:32 ws-client.go:181: Ping sent to client: 127.0.0.1:41200
2023/06/01 10:07:32 ws-client.go:60: Pong received, handler called, timer reset.
2023/06/01 10:07:34 ws-client.go:181: Ping sent to client: 127.0.0.1:41200
2023/06/01 10:07:34 ws-client.go:60: Pong received, handler called, timer reset.
2023/06/01 10:07:38 handlers.go:41: Checking login status.
2023/06/01 10:07:38 handlers.go:56: Manager's clients:  map[0xc000140930:true]
2023/06/01 10:07:38 handlers.go:94: No client found with matching session ID. User not logged in.
2023/06/01 10:07:38 handlers.go:108: Login handler reached.
2023/06/01 10:07:38 handlers.go:124: Login POST request received.
2023/06/01 10:07:38 utility.go:29: Password and hash match.
2023/06/01 10:07:38 handlers.go:143: User found: {ID:1 Username:admin Email:admin@example.com Joined:2023-05-17 15:29:59 Password:$2a$12$nOhLtBhYC0.XOm3IQ37wy.H8Mk8u52Grek4d1UGA0sNbQr4D/ik32 Session: NumberComments:0 NumberPosts:0}
2023/06/01 10:07:38 handlers.go:144: Authentication condition reached.
2023/06/01 10:07:38 handlers.go:145: User Login list:  map[usr1:true]
2023/06/01 10:07:38 handlers.go:377: AllPostsHandler reached.
2023/06/01 10:07:38 handlers.go:377: AllPostsHandler reached.
2023/06/01 10:07:38 handlers.go:270: Serving websocket.
2023/06/01 10:07:38 handlers.go:30: Checking origin: https://localhost
2023/06/01 10:07:38 handlers.go:278: Decoding request body.
2023/06/01 10:07:38 handlers.go:279: ServeWS request body:  {}
2023/06/01 10:07:38 handlers.go:291: Session Id in ServeWS:  e340949e-1bc5-45b8-92a6-075620520c71
2023/06/01 10:07:38 handlers.go:308: Client does not exist.
2023/06/01 10:07:38 ws-client.go:44: New client connected.
2023/06/01 10:07:38 ws-manager.go:164: Client: 127.0.0.1:38372 added to manager.
2023/06/01 10:07:38 ws-client.go:65: Client IP and client port num.:  127.0.0.1:38372
2023/06/01 10:07:38 ws-client.go:89: Client read message from:  127.0.0.1:38372
2023/06/01 10:07:38 ws-manager.go:64: Adding user info: {user-connect {"otp":"2d0b02c2-038f-41fb-ad33-757c489f07ac","id":1,"username":"admin","email":"admin@example.com","joined":"2023-05-17 15:29:59","loggedIn":false}}
2023/06/01 10:07:38 ws-manager.go:77: Adding user to LoggedInList:  admin
2023/06/01 10:07:38 ws-manager.go:81: User: admin added to LoggedInList:  map[admin:true usr1:true]
2023/06/01 10:07:38 ws-client.go:173: Message sent to client: 127.0.0.1:41200 Message: {"type":"users-online","payload":{"admin":true,"usr1":true}}
2023/06/01 10:07:38 ws-client.go:173: Message sent to client: 127.0.0.1:38372 Message: {"type":"users-online","payload":{"admin":true,"usr1":true}}
2023/06/01 10:07:41 ws-client.go:181: Ping sent to client: 127.0.0.1:41200
2023/06/01 10:07:41 ws-client.go:60: Pong received, handler called, timer reset.
2023/06/01 10:07:41 ws-client.go:181: Ping sent to client: 127.0.0.1:41200
2023/06/01 10:07:41 ws-client.go:60: Pong received, handler called, timer reset.
2023/06/01 10:07:43 ws-client.go:181: Ping sent to client: 127.0.0.1:41200
2023/06/01 10:07:43 ws-client.go:60: Pong received, handler called, timer reset.
2023/06/01 10:07:47 ws-client.go:181: Ping sent to client: 127.0.0.1:38372
2023/06/01 10:07:47 ws-client.go:60: Pong received, handler called, timer reset.
2023/06/01 10:07:50 ws-client.go:181: Ping sent to client: 127.0.0.1:41200
2023/06/01 10:07:50 ws-client.go:60: Pong received, handler called, timer reset.
2023/06/01 10:07:50 ws-client.go:181: Ping sent to client: 127.0.0.1:41200
2023/06/01 10:07:50 ws-client.go:60: Pong received, handler called, timer reset.
2023/06/01 10:07:52 ws-client.go:181: Ping sent to client: 127.0.0.1:41200
2023/06/01 10:07:52 ws-client.go:60: Pong received, handler called, timer reset.
2023/06/01 10:07:56 ws-client.go:181: Ping sent to client: 127.0.0.1:38372
2023/06/01 10:07:56 ws-client.go:60: Pong received, handler called, timer reset.
2023/06/01 10:07:59 ws-client.go:181: Ping sent to client: 127.0.0.1:41200
2023/06/01 10:07:59 ws-client.go:60: Pong received, handler called, timer reset.
2023/06/01 10:07:59 ws-client.go:181: Ping sent to client: 127.0.0.1:41200
2023/06/01 10:07:59 ws-client.go:60: Pong received, handler called, timer reset.
2023/06/01 10:08:01 ws-client.go:181: Ping sent to client: 127.0.0.1:41200
2023/06/01 10:08:01 ws-client.go:60: Pong received, handler called, timer reset.
2023/06/01 10:08:05 ws-client.go:181: Ping sent to client: 127.0.0.1:38372
2023/06/01 10:08:05 ws-client.go:60: Pong received, handler called, timer reset.
2023/06/01 10:08:08 ws-client.go:181: Ping sent to client: 127.0.0.1:41200
2023/06/01 10:08:08 ws-client.go:60: Pong received, handler called, timer reset.
2023/06/01 10:08:08 ws-client.go:181: Ping sent to client: 127.0.0.1:41200
2023/06/01 10:08:08 ws-client.go:60: Pong received, handler called, timer reset.
2023/06/01 10:08:10 ws-client.go:181: Ping sent to client: 127.0.0.1:41200
2023/06/01 10:08:10 ws-client.go:60: Pong received, handler called, timer reset.
2023/06/01 10:08:14 ws-client.go:181: Ping sent to client: 127.0.0.1:38372
2023/06/01 10:08:14 ws-client.go:60: Pong received, handler called, timer reset.
2023/06/01 10:08:17 ws-client.go:181: Ping sent to client: 127.0.0.1:41200
2023/06/01 10:08:17 ws-client.go:60: Pong received, handler called, timer reset.
2023/06/01 10:08:17 ws-client.go:181: Ping sent to client: 127.0.0.1:41200
2023/06/01 10:08:17 ws-client.go:60: Pong received, handler called, timer reset.
2023/06/01 10:08:19 ws-client.go:181: Ping sent to client: 127.0.0.1:41200
2023/06/01 10:08:19 ws-client.go:60: Pong received, handler called, timer reset.
2023/06/01 10:08:23 ws-client.go:181: Ping sent to client: 127.0.0.1:38372
2023/06/01 10:08:23 ws-client.go:60: Pong received, handler called, timer reset.
2023/06/01 10:08:26 ws-client.go:181: Ping sent to client: 127.0.0.1:41200
2023/06/01 10:08:26 ws-client.go:60: Pong received, handler called, timer reset.
2023/06/01 10:08:26 ws-client.go:181: Ping sent to client: 127.0.0.1:41200
2023/06/01 10:08:26 ws-client.go:60: Pong received, handler called, timer reset.
2023/06/01 10:08:28 ws-client.go:181: Ping sent to client: 127.0.0.1:41200
2023/06/01 10:08:28 ws-client.go:60: Pong received, handler called, timer reset.
2023/06/01 10:08:32 ws-client.go:181: Ping sent to client: 127.0.0.1:38372
2023/06/01 10:08:32 ws-client.go:60: Pong received, handler called, timer reset.
2023/06/01 10:08:35 ws-client.go:181: Ping sent to client: 127.0.0.1:41200
2023/06/01 10:08:35 ws-client.go:60: Pong received, handler called, timer reset.
2023/06/01 10:08:35 ws-client.go:181: Ping sent to client: 127.0.0.1:41200
2023/06/01 10:08:35 ws-client.go:60: Pong received, handler called, timer reset.
2023/06/01 10:08:37 ws-client.go:181: Ping sent to client: 127.0.0.1:41200
2023/06/01 10:08:37 ws-client.go:60: Pong received, handler called, timer reset.
2023/06/01 10:08:41 ws-client.go:181: Ping sent to client: 127.0.0.1:38372
2023/06/01 10:08:41 ws-client.go:60: Pong received, handler called, timer reset.
2023/06/01 10:08:44 ws-client.go:181: Ping sent to client: 127.0.0.1:41200
2023/06/01 10:08:44 ws-client.go:60: Pong received, handler called, timer reset.
2023/06/01 10:08:44 ws-client.go:181: Ping sent to client: 127.0.0.1:41200
2023/06/01 10:08:44 ws-client.go:60: Pong received, handler called, timer reset.
2023/06/01 10:08:46 ws-client.go:181: Ping sent to client: 127.0.0.1:41200
2023/06/01 10:08:46 ws-client.go:60: Pong received, handler called, timer reset.
2023/06/01 10:08:50 ws-client.go:181: Ping sent to client: 127.0.0.1:38372
2023/06/01 10:08:50 ws-client.go:60: Pong received, handler called, timer reset.
2023/06/01 10:08:53 ws-client.go:181: Ping sent to client: 127.0.0.1:41200
2023/06/01 10:08:53 ws-client.go:60: Pong received, handler called, timer reset.
2023/06/01 10:08:53 ws-client.go:181: Ping sent to client: 127.0.0.1:41200
2023/06/01 10:08:53 ws-client.go:60: Pong received, handler called, timer reset.
2023/06/01 10:08:55 ws-client.go:181: Ping sent to client: 127.0.0.1:41200
2023/06/01 10:08:55 ws-client.go:60: Pong received, handler called, timer reset.
2023/06/01 10:08:59 ws-client.go:181: Ping sent to client: 127.0.0.1:38372
2023/06/01 10:08:59 ws-client.go:60: Pong received, handler called, timer reset.
2023/06/01 10:09:02 ws-client.go:181: Ping sent to client: 127.0.0.1:41200
2023/06/01 10:09:02 ws-client.go:60: Pong received, handler called, timer reset.
2023/06/01 10:09:02 ws-client.go:181: Ping sent to client: 127.0.0.1:41200
2023/06/01 10:09:02 ws-client.go:60: Pong received, handler called, timer reset.
2023/06/01 10:09:04 ws-client.go:181: Ping sent to client: 127.0.0.1:41200
2023/06/01 10:09:04 ws-client.go:60: Pong received, handler called, timer reset.
2023/06/01 10:09:08 ws-client.go:181: Ping sent to client: 127.0.0.1:38372
2023/06/01 10:09:08 ws-client.go:60: Pong received, handler called, timer reset.
2023/06/01 10:09:11 ws-client.go:181: Ping sent to client: 127.0.0.1:41200
2023/06/01 10:09:11 ws-client.go:60: Pong received, handler called, timer reset.
2023/06/01 10:09:11 ws-client.go:181: Ping sent to client: 127.0.0.1:41200
2023/06/01 10:09:11 ws-client.go:60: Pong received, handler called, timer reset.
2023/06/01 10:09:13 ws-client.go:181: Ping sent to client: 127.0.0.1:41200
2023/06/01 10:09:13 ws-client.go:60: Pong received, handler called, timer reset.
2023/06/01 10:09:17 ws-client.go:181: Ping sent to client: 127.0.0.1:38372
2023/06/01 10:09:17 ws-client.go:60: Pong received, handler called, timer reset.
2023/06/01 10:09:20 ws-client.go:181: Ping sent to client: 127.0.0.1:41200
2023/06/01 10:09:20 ws-client.go:60: Pong received, handler called, timer reset.
2023/06/01 10:09:20 ws-client.go:181: Ping sent to client: 127.0.0.1:41200
2023/06/01 10:09:20 ws-client.go:60: Pong received, handler called, timer reset.
2023/06/01 10:09:22 ws-client.go:181: Ping sent to client: 127.0.0.1:41200
2023/06/01 10:09:22 ws-client.go:60: Pong received, handler called, timer reset.
2023/06/01 10:09:26 ws-client.go:181: Ping sent to client: 127.0.0.1:38372
2023/06/01 10:09:26 ws-client.go:60: Pong received, handler called, timer reset.
2023/06/01 10:09:29 ws-client.go:181: Ping sent to client: 127.0.0.1:41200
2023/06/01 10:09:29 ws-client.go:60: Pong received, handler called, timer reset.
2023/06/01 10:09:29 ws-client.go:181: Ping sent to client: 127.0.0.1:41200
2023/06/01 10:09:29 ws-client.go:60: Pong received, handler called, timer reset.
2023/06/01 10:09:31 ws-client.go:181: Ping sent to client: 127.0.0.1:41200
2023/06/01 10:09:31 ws-client.go:60: Pong received, handler called, timer reset.
2023/06/01 10:09:35 ws-client.go:181: Ping sent to client: 127.0.0.1:38372
2023/06/01 10:09:35 ws-client.go:60: Pong received, handler called, timer reset.
2023/06/01 10:09:38 ws-client.go:181: Ping sent to client: 127.0.0.1:41200
2023/06/01 10:09:38 ws-client.go:60: Pong received, handler called, timer reset.
2023/06/01 10:09:38 ws-client.go:181: Ping sent to client: 127.0.0.1:41200
2023/06/01 10:09:38 ws-client.go:60: Pong received, handler called, timer reset.
2023/06/01 10:09:40 ws-client.go:181: Ping sent to client: 127.0.0.1:41200
2023/06/01 10:09:40 ws-client.go:60: Pong received, handler called, timer reset.
2023/06/01 10:09:44 ws-client.go:181: Ping sent to client: 127.0.0.1:38372
2023/06/01 10:09:44 ws-client.go:60: Pong received, handler called, timer reset.
2023/06/01 10:09:47 ws-client.go:181: Ping sent to client: 127.0.0.1:41200
2023/06/01 10:09:47 ws-client.go:60: Pong received, handler called, timer reset.
2023/06/01 10:09:47 ws-client.go:181: Ping sent to client: 127.0.0.1:41200
2023/06/01 10:09:47 ws-client.go:60: Pong received, handler called, timer reset.
2023/06/01 10:09:49 ws-client.go:181: Ping sent to client: 127.0.0.1:41200
2023/06/01 10:09:49 ws-client.go:60: Pong received, handler called, timer reset.
2023/06/01 10:09:53 ws-client.go:181: Ping sent to client: 127.0.0.1:38372
2023/06/01 10:09:53 ws-client.go:60: Pong received, handler called, timer reset.
2023/06/01 10:09:56 ws-client.go:181: Ping sent to client: 127.0.0.1:41200
2023/06/01 10:09:56 ws-client.go:60: Pong received, handler called, timer reset.
2023/06/01 10:09:56 ws-client.go:181: Ping sent to client: 127.0.0.1:41200
2023/06/01 10:09:56 ws-client.go:60: Pong received, handler called, timer reset.
2023/06/01 10:09:58 ws-client.go:181: Ping sent to client: 127.0.0.1:41200
2023/06/01 10:09:58 ws-client.go:60: Pong received, handler called, timer reset.
2023/06/01 10:10:02 ws-client.go:181: Ping sent to client: 127.0.0.1:38372
2023/06/01 10:10:02 ws-client.go:60: Pong received, handler called, timer reset.
2023/06/01 10:10:05 ws-client.go:181: Ping sent to client: 127.0.0.1:41200
2023/06/01 10:10:05 ws-client.go:60: Pong received, handler called, timer reset.
2023/06/01 10:10:05 ws-client.go:181: Ping sent to client: 127.0.0.1:41200
2023/06/01 10:10:05 ws-client.go:60: Pong received, handler called, timer reset.
2023/06/01 10:10:07 ws-client.go:181: Ping sent to client: 127.0.0.1:41200
2023/06/01 10:10:07 ws-client.go:60: Pong received, handler called, timer reset.
2023/06/01 10:10:11 ws-client.go:181: Ping sent to client: 127.0.0.1:38372
2023/06/01 10:10:11 ws-client.go:60: Pong received, handler called, timer reset.
2023/06/01 10:12:24 ws-client.go:181: Ping sent to client: 127.0.0.1:41200
2023/06/01 10:12:24 ws-client.go:181: Ping sent to client: 127.0.0.1:41200
2023/06/01 10:12:24 ws-client.go:89: Client read message from:  127.0.0.1:41200
2023/06/01 10:12:24 ws-client.go:91: Client Made an Error:  read tcp 127.0.0.1:443->127.0.0.1:41200: use of closed network connection
